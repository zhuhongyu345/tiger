<!---->
<!DOCTYPE html>
<html lang="zh-CN" style="height: 100%">
<head>
  <meta charset="utf-8">
</head>
<body style="height: 100%; margin: 0">


<button onclick="hideChar()">隐藏所有元素</button>
<button onclick="showChar()">显示所有元素</button>
<button onclick="showChar1()">显示一期</button>
<button onclick="showChar2()">显示二期</button>
<button onclick="showChar3()">显示三期</button>
<button onclick="showGamma()">显示gamma</button>
<select id = "biaodi" style="height: 26px;width:80px;">
  <option value="913243251">spy</option>
  <option value="913256180">amzn</option>
  <option value="913256091">avgo</option>
  <option value="913255598">tsla</option>
  <option value="913257561">nvda</option>
  <option value="913256192">adbe</option>
  <option value="913243249">qqq</option>
  <option value="913243250">dia</option>
</select>
<button onclick="find()">查询</button>



<div id="container1" style="height: 90%"></div>
<!--//qqq：913243249
  //dia：913243250
  //tsla：913255598
  //adbe: 913256192
  //nvda:913257561-->

<script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5.3.2/dist/echarts.min.js"></script>
<script type="text/javascript" src="https://cdn.staticfile.org/jquery/1.10.2/jquery.min.js"></script>

<!-- Uncomment this line if you want to dataTool extension
<script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5.3.2/dist/extension/dataTool.min.js"></script>
-->
<!-- Uncomment this line if you want to use gl extension
<script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts-gl@2/dist/echarts-gl.min.js"></script>
-->
<!-- Uncomment this line if you want to echarts-stat extension
<script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts-stat@latest/dist/ecStat.min.js"></script>
-->
<!-- Uncomment this line if you want to use map
<script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@4.9.0/map/js/china.js"></script>
<script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@4.9.0/map/js/world.js"></script>
-->
<!-- Uncomment these two lines if you want to use bmap extension
<script type="text/javascript" src="https://api.map.baidu.com/api?v=3.0&ak=YOUR_API_KEY"></script>
<script type="text/javascript" src="https://fastly.jsdelivr.net/npm/echarts@5.3.2/dist/extension/bmap.min.js"></script>
-->


<script type="text/javascript">

  function hideChar() {
    var dom1 = document.getElementById('container1');
    var myChart1 = echarts.init(dom1, null, {
      renderer: 'canvas',
      useDirtyRect: false
    });
    option1 = {
      legend: {
        top: '15%',
        selected: {
          gamma: false,
          call: false,
          put: false,
          c_money: false,
          p_money: false,
          gamma_2: false,
          call_2: false,
          put_2: false,
          c_money_2: false,
          p_money_2: false,
          gamma_3: false,
          call_3: false,
          put_3: false,
          c_money_3: false,
          p_money_3: false
        }
      }
    };
    myChart1.setOption(option1);
  }
  function showChar() {
    var dom1 = document.getElementById('container1');
    var myChart1 = echarts.init(dom1, null, {
      renderer: 'canvas',
      useDirtyRect: false
    });
    option1 = {
      legend: {
        top: '15%',
        selected: {
          gamma: true,
          call: true,
          put: true,
          c_money: true,
          p_money: true,
          gamma_2: true,
          call_2: true,
          put_2: true,
          c_money_2: true,
          p_money_2: true,
          gamma_3: true,
          call_3: true,
          put_3: true,
          c_money_3: true,
          p_money_3: true
        }
      }
    };
    myChart1.setOption(option1);
  }
  function showChar1() {
    var dom1 = document.getElementById('container1');
    var myChart1 = echarts.init(dom1, null, {
      renderer: 'canvas',
      useDirtyRect: false
    });
    option1 = {
      legend: {
        top: '15%',
        selected: {
          gamma: true,
          call: true,
          put: true,
          c_money: true,
          p_money: true,
          gamma_2: false,
          call_2: false,
          put_2: false,
          c_money_2: false,
          p_money_2: false,
          gamma_3: false,
          call_3: false,
          put_3: false,
          c_money_3: false,
          p_money_3: false
        }
      }
    };
    myChart1.setOption(option1);
  }
  function showChar2() {
    var dom1 = document.getElementById('container1');
    var myChart1 = echarts.init(dom1, null, {
      renderer: 'canvas',
      useDirtyRect: false
    });
    option1 = {
      legend: {
        top: '15%',
        selected: {
          gamma: false,
          call: true,
          put: false,
          c_money: false,
          p_money: false,
          gamma_2: true,
          call_2: true,
          put_2: true,
          c_money_2: true,
          p_money_2: true,
          gamma_3: false,
          call_3: false,
          put_3: false,
          c_money_3: false,
          p_money_3: false
        }
      }
    };
    myChart1.setOption(option1);
  }
  function showChar3() {
    var dom1 = document.getElementById('container1');
    var myChart1 = echarts.init(dom1, null, {
      renderer: 'canvas',
      useDirtyRect: false
    });
    option1 = {
      legend: {
        top: '15%',
        selected: {
          gamma: false,
          call: false,
          put: false,
          c_money: false,
          p_money: false,
          gamma_2: false,
          call_2: false,
          put_2: false,
          c_money_2: false,
          p_money_2: false,
          gamma_3: true,
          call_3: true,
          put_3: true,
          c_money_3: true,
          p_money_3: true
        }
      }
    };
    myChart1.setOption(option1);
  }
  function showGamma() {
    var dom1 = document.getElementById('container1');
    var myChart1 = echarts.init(dom1, null, {
      renderer: 'canvas',
      useDirtyRect: false
    });
    option1 = {
      legend: {
        top: '15%',
        selected: {
          gamma: true,
          call: false,
          put: false,
          c_money: false,
          p_money: false,
          gamma_2: true,
          call_2: false,
          put_2: false,
          c_money_2: false,
          p_money_2: false,
          gamma_3: true,
          call_3: false,
          put_3: false,
          c_money_3: false,
          p_money_3: false
        }
      }
    };
    myChart1.setOption(option1);
  }

  function initChart(divId,stockId){
    var dom1 = document.getElementById(divId);
    var myChart1 = echarts.init(dom1, null, {
      renderer: 'canvas',
      useDirtyRect: false
    });

    var app = {};
    var option;
    $.ajax({url:"http://127.0.0.1:80/chainEcharts?id="+stockId,success:function(result){
                res  = JSON.parse(result)
                console.log(res)
                option1 = {
                  title: {
                    text: res.nowPrice,
                    subtext: res.amz,
                    subtextStyle: {
                      fontSize:16
                    }
                  },
                  tooltip: {
                    trigger: 'axis'
                  },
                  legend: {
                    top: '15%',
                    selected: {
                      gamma2: false,
                      delta2: false,
                      gamma3: false,
                      open1a: false,
                      open2: false
                    },
                    data: ['gamma', 'call','put','c_money','p_money',
                      'gamma_2', 'call_2','put_2','c_money_2','p_money_2',
                      'gamma_3', 'call_3','put_3','c_money_3','p_money_3',]
                  },
                  grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '3%',
                    containLabel: true
                  },
                  toolbox: {
                    feature: {
                      dataView: { show: true, readOnly: false }
                    }
                  },
                  xAxis: {
                    type: 'category',
                    boundaryGap: false,
                    data: res.strikes
                  },
                  yAxis: {
                    type: 'value'
                  },
                  series: [
                    {
                      name: 'call',
                      type: 'line',
                      data:  res.char1.openInterestCall,
                    },
                    {
                      name: 'put',
                      type: 'line',
                      data:  res.char1.openInterestPut,
                    },
                    {
                      name: 'c_money',
                      type: 'bar',
                      stack: 'Total',
                      data: res.char1.openInterestCallMoney,
                    },
                    {
                      name: 'p_money',
                      type: 'bar',
                      stack: 'Total',

                      data: res.char1.openInterestPutMoney,
                    },
                    {
                      name: 'gamma',
                      type: 'line',
                      data:  res.char1.deltas,
                    },

                    {
                      name: 'call_2',
                      type: 'line',
                      data:  res.char2.openInterestCall,
                    },
                    {
                      name: 'put_2',
                      type: 'line',
                      data:  res.char2.openInterestPut,
                    },
                    {
                      name: 'c_money_2',
                      type: 'bar',
                      stack: 'Total2',
                      data: res.char2.openInterestCallMoney,
                    },
                    {
                      name: 'p_money_2',
                      type: 'bar',
                      stack: 'Total2',

                      data: res.char2.openInterestPutMoney,
                    },
                    {
                      name: 'gamma_2',
                      type: 'line',
                      data:  res.char2.deltas,
                    },

                    {
                      name: 'call_3',
                      type: 'line',
                      data:  res.charMonth.openInterestCall,
                    },
                    {
                      name: 'put_3',
                      type: 'line',
                      data:  res.charMonth.openInterestPut,
                    },
                    {
                      name: 'c_money_3',
                      type: 'bar',
                      stack: 'Total3',
                      data: res.charMonth.openInterestCallMoney,
                    },
                    {
                      name: 'p_money_3',
                      type: 'bar',
                      stack: 'Total3',

                      data: res.charMonth.openInterestPutMoney,
                    },
                    {
                      name: 'gamma_3',
                      type: 'line',
                      data:  res.charMonth.deltas,
                    },
                  ]
                };
                myChart1.setOption(option1);
                console.log("init");
                window.addEventListener('resize', myChart1.resize);
              }
            }
    )
  }

  <!-- ////spy：913243251
  //qqq：913243249
  //dia：913243250
  //tsla：913255598
  //adbe: 913256192
  //nvda:913257561
  //totdo 把每天的未平仓数据存起来，就知道哪些单怎么变化了
  -->
  initChart('container1','913243251')
  function find(){
    biaodi = $("#biaodi").val();
    console.log(biaodi)
    initChart('container1',biaodi)
  }

</script>
</body>
</html>